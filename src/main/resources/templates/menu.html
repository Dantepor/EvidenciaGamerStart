<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MENU</title>
<link th:href="@{/mdbootstrap/css/mdb.min.css}" rel="stylesheet">
<link th:href="@{/css/menu.css}" rel="stylesheet">
<style>
    /* Estilo para la ventana emergente del carrito */
    .cart-popup {
        display: none;
        position: fixed;
        top: 0;
        right: 0;
        width: 325px;
        height: 100%;
        background: #fff;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
        padding: 20px;
        overflow-y: auto;
        z-index: 9999;
    }
    /* Estilo para el encabezado del carrito */
    .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    /* Estilo para el botón de cierre del carrito */
    #closeCartBtn {
        padding: 5px 10px;
    }
    /* Estilo para la lista de elementos del carrito */
    #cartItems {
        list-style: none;
        padding: 0;
    }
    /* Estilo para cada elemento del carrito */
    #cartItems li {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    /* Estilo para la imagen del producto en el carrito */
    #cartItems li img {
        width: 50px;
        margin-right: 10px;
    }
</style>
</head>
<body>
			<div class="container p-3">
			    <div class="row header-row">
			        <div class="col-2">
			            <!-- Icono -->
						<a th:href="@{/menu/primero}">
			            <img th:src="@{/img/logo4.png}" alt="Icono" width="100px"/>
						</a>
			        </div>
			        <div class="col-6">
			            <!-- Barra de búsqueda -->
			            <input type="text" class="form-control" placeholder="Buscar productos">
			        </div>
					<div class="col-2">
					    <!-- Icono de carrito de compras -->
					    <!-- Agregar un ID al botón de carrito -->
					    <button id="openCartBtn" class="btn">
					        <img th:src="@{/img/compra.png}" alt="Carrito de compras" width="130px"/>
					    </button>
					</div>
			        <div class="col-2">
			            <!-- Imagen de perfil -->
						<a th:href="@{/ingreso/perfil}">
			            <img th:src="@{/img/perfil.png}"  alt="Imagen de perfil" width="70px"/>
						</a>
			        </div>
			    </div>

			    <!-- Botones -->
			    <div class="row">
			        <div class="col text-center">
			           <a class="btn custom-btn" th:href="@{/menu/segundo}">Videojuegos</a>
			        </div>
			        <div class="col text-center">
			            <a class="btn custom-btn" th:href="@{/menu/tercero}">Consolas</a>
			        </div>
			        <div class="col text-center">
			            <a class="btn custom-btn" th:href="@{/menu/cuarto}">Accesorios</a>
			        </div>
			        <div class="col text-center">
			             <a class="btn custom-btn" th:href="@{/menu/quinto}">Ofertas</a>
			        </div>
					<div class="col text-center">
					      <a class="btn custom-btn" th:href="@{/menu/sexto}">Novedades</a>
					</div>
			    </div>
				<!-- Texto "Últimos lanzamientos" y cuadro en blanco -->
					    <div class="row">
					        <div class="col section-title">
					            <h1 style="color: white;">Ultimos lanzamientos</h1>
					        </div>
					    </div>
					    <div class="row">
					        <div class="col white-box">
					            <!-- Primera fila de productos -->
					            <div class="row">
					                <div class="col-3 text-center">
					                    <h5>The Last of Us Part II Remastered</h5>
					                    <a th:href="@{/menu/detalle}"><img class="product-img" th:src="@{/img/game1.jpg}" alt="Producto 1"></a>
					                    <p class="product-price">S/ 214.00</p>
					                    <button type="button" class="btn custom-btn buy-btn">Comprar</button>
					                </div>
					                <div class="col-3 text-center">
					                    <h5>Gran Turismo® 7 Deluxe Edition</h5>
					                    <img class="product-img" th:src="@{/img/game2.png}" alt="Producto 2">
					                    <p class="product-price">S/ 198.00</p>
					                    <button type="button" class="btn custom-btn buy-btn">Comprar</button>
					                </div>
					                <div class="col-3 text-center">
					                    <h5>Marvel's Spider-Man: Miles Morales</h5>
					                    <img class="product-img" th:src="@{/img/game3.jpg}" alt="Producto 1">
					                    <p class="product-price">S/ 244.00</p>
					                    <button type="button" class="btn custom-btn">Comprar</button>
					                </div>
					                <div class="col-3 text-center">
					                    <h5>Death Stranding Deluxe Edition</h5>
					                    <img class="product-img" th:src="@{/img/game4.png}" alt="Producto 2">
					                    <p class="product-price">S/ 194.00</p>
					                    <button type="button" class="btn custom-btn">Comprar</button>
					                </div>
					            </div>

					            <!-- Segunda fila de productos -->
								<div class="row">
									<div class="col-3 text-center">
									    <h5>Mando Inalámbrico PlayStation 4 Dualshock</h5>
									    <img class="product-img" th:src="@{/img/mando4.jpg}" alt="Producto 1">
				                        <p class="product-price">S/ 145.00</p>
				                        <button type="button" class="btn custom-btn">Comprar</button>
								   </div>
					               <div class="col-3 text-center">
										<h5>Mando para Nintendo Switch Pro Inalámbrico</h5>
										<img class="product-img" th:src="@{/img/mando6.jpg}" alt="Producto 2">
										<p class="product-price">S/ 150.00</p>
										<button type="button" class="btn custom-btn">Comprar</button>
									</div>
									<div class="col-3 text-center">
										<h5>Mando Inalambrico Microsoft XBOX</h5>
										<img class="product-img" th:src="@{/img/mando5.jpg}" alt="Producto 1">
									    <p class="product-price">S/ 135.00</p>
										<button type="button" class="btn custom-btn">Comprar</button>
								     </div>
									 <div class="col-3 text-center">
							            <h5>Mando PS4 Dualshock Joystick Playstation 4</h5>
										<img class="product-img" th:src="@{/img/mando8.jpg}" alt="Producto 2">
										<p class="product-price">S/ 146.00</p>
									    <button type="button" class="btn custom-btn">Comprar</button>
									  </div>
								 </div>
					        </div>
					    </div>
						<!--Pie de Página -->
									<div class="red-box">
									    <div class="container">
									        <div class="row">
									            <!-- Columna de imágenes -->
									            <div class="col-3 text-center">
									                <!-- Imágenes -->
									                <img th:src="@{/img/facebook.png}" width="47px" alt="Imagen Secundaria 1">
									                <img th:src="@{/img/insta.png}" width="47px" alt="Imagen Secundaria 2">
									                <img th:src="@{/img/wasap.png}" width="41px" alt="Imagen Secundaria 3">
									                <!-- Logo debajo de las imágenes -->
									                <img th:src="@{/img/logo4.png}" width="100px" alt="Imagen Principal">
									            </div>
									            <!-- Columna de texto -->
									            <div class="col-3">
									                <p>Información</p>
									                <p>Preguntas Frecuentes</p>
									                <p>Medios de Pago</p>
									                <p>Terminos y Condiciones</p>
									            </div>
									            <!-- Columna de texto -->
									            <div class="col-3">
									                <p>Servicio al Cliente</p>
									                <p>Formulario de Contacto</p>
									                <p>Libro de Reclamaciones</p>
									            </div>
									            <!-- Columna de texto -->
									            <div class="col-3">
									                <p>Contactanos</p>
									                <p>Siempre abiertos -</p>
									                <p>Horarios de Despacho</p>
									                <p>Apartir de las 10am a 8pm</p>
									                <p>Los pedidos del dia domingo</p>
									                <p>Se envian el dia lunes</p>
									            </div>
									        </div>
									        <!-- Texto centrado -->
									        <div class="row mt-3">
									            <div class="col text-center">
									                <p>2024 © Todos los derechos reservados</p>
									            </div>
									        </div>
									    </div>
									</div>
									<!-- Ventana emergente del carrito -->
									    <div id="cartPopup" class="cart-popup">
									        <!-- Contenido del carrito aquí -->
									        <div class="cart-header">
									            <h3>Carrito</h3>
									            <!-- Botón de cierre del carrito -->
									            <button id="closeCartBtn" class="btn btn-danger btn-sm">Cerrar</button>
									        </div>
									        <ul id="cartItems">
									            <!-- Aquí se llenarán los elementos del carrito dinámicamente mediante JavaScript -->
									        </ul>
									        <p id="subtotal">Subtotal: $0.00</p>
									        <!-- Contenedor para centrar el botón "Finalizar Compra" y aplicar color personalizado -->
									        <div class="text-center">
									            <button id="checkoutBtn" class="btn btn-custom">Finalizar Compra</button>
									        </div>
									    </div>
									<!--CARRITO DE COMPRAS-->
									<script>
									    document.addEventListener('DOMContentLoaded', function () {
									        const openCartBtn = document.getElementById('openCartBtn');
									        const cartPopup = document.getElementById('cartPopup');
									        const cartItems = document.getElementById('cartItems');
									        const subtotal = document.getElementById('subtotal');

									        // Array para almacenar los productos seleccionados
									        const selectedProducts = [];

									        // Función para agregar un producto al carrito
									        function addToCart(product) {
									            selectedProducts.push(product);
									            renderCart();
									        }

									        // Función para renderizar el carrito
									        function renderCart() {
									            // Limpiar el contenido del carrito
									            cartItems.innerHTML = '';

									            // Calcular el subtotal
									            let total = 0;
									            selectedProducts.forEach(item => {
									                total += item.price;
									                // Crear un elemento de lista
									                const li = document.createElement('li');

									                // Crear una imagen del producto
									                const img = document.createElement('img');
									                img.src = item.image; // Ruta de la imagen del producto
									                img.alt = item.title;
									                img.style.width = '80px'; // Establecer el tamaño de la imagen

									                // Agregar la imagen a la lista
									                li.appendChild(img);

									                // Agregar el título y el precio del producto
									                li.innerHTML += `<span>${item.title} - $${item.price}</span>`;

									                // Agregar el elemento de lista al carrito
									                cartItems.appendChild(li);
									            });

									            // Actualizar el subtotal en la ventana emergente del carrito
									            subtotal.textContent = `Subtotal: $${total.toFixed(2)}`;

									            // Mostrar la ventana emergente del carrito
									            cartPopup.style.display = 'block';
									        }

									        // Agregar evento de clic al botón de cierre del carrito
									        const closeCartBtn = document.getElementById('closeCartBtn');
									        closeCartBtn.addEventListener('click', function () {
									            // Ocultar la ventana emergente del carrito al hacer clic en el botón de cierre
									            cartPopup.style.display = 'none';
									        });

											// Agregar evento de clic al botón de comprar de cada producto
											const buyButtons = document.querySelectorAll('.buy-btn');
											buyButtons.forEach(button => {
											    button.addEventListener('click', function () {
											        const productContainer = button.closest('.col-3.text-center'); // Corregir el selector aquí
											        const title = productContainer.querySelector('h5').textContent;
											        const price = parseFloat(productContainer.querySelector('.product-price').textContent.split(' ')[1]);
											        const image = productContainer.querySelector('img').src;
											        const product = { title, price, image };
											        addToCart(product);
											    });
											});

									        // Agregar evento de clic al botón de abrir el carrito
									        openCartBtn.addEventListener('click', function () {
									            // Mostrar la ventana emergente del carrito al hacer clic en el botón de carrito
									            cartPopup.style.display = 'block';
									        });
									    });
									</script>
									<script>
									  $('.carousel').carousel({
									    interval: 3000 // Cambia la imagen cada 3 segundos
									  });
									</script>
		<script type="text/javascript" th:src="@{/mdbootstrap/js/mdb.min.js}"></script>
		<script type="text/javascript" th:src="@{/js/script.js}"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
</html>